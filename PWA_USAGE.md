# PWA 离线阅读使用说明

## 📱 添加到主屏幕

### Android Chrome
1. 访问 https://novel.carrick7.com
2. 点击浏览器菜单（三个点）
3. 选择「添加到主屏幕」
4. 确认添加

### iOS Safari
1. 访问 https://novel.carrick7.com
2. 点击底部「分享」按钮
3. 选择「添加到主屏幕」
4. 点击「添加」

### 桌面 Chrome/Edge
1. 访问 https://novel.carrick7.com
2. 点击地址栏右侧的「安装」图标
3. 或按菜单 → 安装"人机AK的日常"

## 📶 离线功能

### 自动缓存
- **静态资源**：首次访问自动缓存（JS/CSS/HTML/图标）
- **章节内容**：阅读过的章节自动缓存（保留30天）
- **最大缓存**：500个章节文件

### 离线提示
- 进入离线模式时，页面顶部会显示提示
- 已缓存的内容可继续阅读
- 重新联网时会自动恢复在线模式

### 缓存策略
| 资源类型 | 缓存方式 | 有效期 |
|---------|---------|--------|
| 静态文件 | 预缓存 | 新版本自动更新 |
| 章节内容 | 运行时缓存 | 30天 |
| API 数据 | 运行时缓存 | 30天 |

## 🔄 更新机制

### Service Worker 自动更新
- 打开应用时自动检查更新
- 发现新版本后自动后台更新
- 下次访问时使用最新版本

### 强制刷新
如果内容没有更新，可尝试：
1. 完全关闭应用/浏览器标签
2. 重新打开
3. 或按 Ctrl+F5 (Windows) / Cmd+Shift+R (Mac)

## 📋 功能清单

- ✅ 添加到主屏幕
- ✅ 离线阅读已缓存章节
- ✅ 网络状态提示（在线/离线）
- ✅ 自动后台更新
- ✅ 沉浸式全屏体验
- ✅ 初音绿色主题

## 🔧 故障排除

### 离线时无法阅读
1. 确保之前在线时访问过该章节
2. 检查浏览器设置 → 网站数据是否被清除
3. 重新联网访问一次该章节以重新缓存

### 安装按钮不显示
- **Chrome**：浏览器会自动显示安装提示
- **iOS**：必须使用 Safari 浏览器
- **条件**：需要 HTTPS 且满足 PWA 清单要求

### Service Worker 未注册
1. 打开浏览器开发者工具 → Application → Service Workers
2. 检查是否有 sw.js 已注册
3. 如没有，刷新页面或清除缓存后重试

## 📝 注意事项

1. **首次访问**：需要联网加载所有资源
2. **缓存限制**：浏览器可能有存储限制（通常 50MB-200MB）
3. **隐私模式**：某些浏览器的隐私/无痕模式不支持 Service Worker
4. **清理缓存**：清理浏览器数据会同时清除离线缓存的章节

## 🎨 主题色

- **主题色**：#39c5bb (初音绿)
- **背景色**：#1a1a2e (深色背景)
- **App 名称**：人机AK的日常
- **短名称**：AK日常
