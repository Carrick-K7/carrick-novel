# T-001: 项目初始化 - 从 Dashboard 剥离轻小说功能

**Task ID**: T-001  
**创建时间**: 2026-02-19（东八区）  
**上线时间**: 2026-02-19（东八区）  
**状态**: ✅ 已上线  
**负责人**: Miku

---

## 需求背景

将 Dashboard 中的轻小说功能剥离为独立项目，部署到独立域名 `novel.carrick7.com`。

**原因**:
- Dashboard 专注项目管理
- 轻小说作为独立产品，需要独立品牌和域名

---

## 技术方案

### 架构设计
```
carrick-novel/
├── src/
│   ├── App.vue              # 简化版，直接嵌入阅读器
│   ├── main.ts
│   └── views/
│       └── Home.vue         # 原 NovelView.vue 迁移
├── public/
│   └── novels/              # 112章小说数据
├── scripts/                 # 同步脚本
└── dist/                    # 构建输出
```

### 技术选型
- **框架**: Vue3 + Vite
- **语言**: TypeScript
- **构建**: Vite build
- **部署**: Caddy + 静态文件

---

## 开发过程

### Phase 1: 项目搭建
- [x] 创建项目目录
- [x] 初始化 Vue3 + Vite
- [x] 迁移 NovelView.vue → Home.vue
- [x] 迁移小说数据 (112章)
- [x] 迁移同步脚本

### Phase 2: 构建与部署
- [x] 构建项目
- [x] 配置 Caddy (novel.carrick7.com)
- [x] 部署到 /var/www/carrick-novel
- [x] DNS 配置 (Carrick)

### Phase 3: Dashboard 清理
- [x] 移除 Dashboard 中 Novel 路由
- [x] 移除 Novel 菜单项
- [x] 添加 /novel 重定向到新域名

---

## QA 检查（3项防线）

### 防线1: 静态检查
- [x] Lint 检查: `eslint` - 通过
- [x] 类型检查: `vue-tsc` - 通过
- [x] 预留标记检查: 无 TODO/FIXME

### 防线2: 构建验证
- [x] 构建命令: `npm run build`
- [x] 构建结果: 成功
- [x] 产物验证: dist/ 存在 (index.html + assets/ + novels/)

### 防线3: 功能验证
- [x] 新功能清单:
  - 轻小说独立站点
  - 书籍切换
  - 章节阅读
  - 阅读进度记忆
- [x] 回归清单:
  - 阅读进度 localStorage 兼容
  - 移动端适配
- [x] 自动化测试: Playwright 基础截图验证
- [x] 需人工确认项: 视觉细节优化（后续版本处理）

### 发现的问题
- 部署时 Caddy 配置未写入主文件 → 已修复
- SSL 证书自动获取延迟 → 正常等待后恢复

---

## 部署记录

```bash
# 部署时间: 2026-02-19
# 部署命令:
npm run build
sudo cp -r dist/* /var/www/carrick-novel/
sudo systemctl reload caddy

# 验证:
curl -s https://novel.carrick7.com | head -5
# HTTP/2 200 OK
```

---

## Git 提交

- `b75184c` - init: 轻小说独立项目 carrick-novel v1.0.0
- `720f042` - refactor(T-043): 轻小说剥离 Dashboard

---

## 后续优化方向

- [ ] UI 独立品牌化（标题、Logo）
- [ ] 添加返回 Dashboard 入口
- [ ] 移动端进一步优化
- [ ] 添加统计/分析功能

---

## 经验总结

**做得好的**:
- 数据迁移完整（112章全部保留）
- 阅读进度记忆功能正常迁移
- DNS 和 SSL 配置顺利

**需要改进的**:
- 应该在新项目启动时就建立 Task 系统
- QA 流程应该在部署前严格执行（本次补做）

---

*Carrick + Miku = 超级团队* 🚀
